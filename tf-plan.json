{"format_version":"0.1","terraform_version":"0.14.5","variables":{"access_key":{"value":"AKIAIW3CWJZDARUISEDQ"},"ami":{"value":"ami-0a91cd140a1fc148a"},"region":{"value":"us-east-1"},"s3_acl":{"value":"public"},"secret_key":{"value":"lYJLaUY0nqE+ubt8G2qkJQbg5h0MbHxlNP/4rQmt"}},"planned_values":{"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false}}],"child_modules":[{"resources":[{"address":"module.instance.aws_instance.this[0]","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0a91cd140a1fc148a","credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_optimized":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"","instance_initiated_shutdown_behavior":"","instance_type":"t2.micro","monitoring":false,"source_dest_check":true,"subnet_id":"subnet-059f7172239c31e10","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-0a3b6aca83c2e776b"]}}],"address":"module.instance"},{"resources":[{"address":"module.storage.aws_db_instance.km_db","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"10.6","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","iam_database_authentication_enabled":null,"identifier":"km-db-dev","instance_class":"db.t3.medium","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"name":"km_db_dev","password":"supersecret","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"timeouts":null,"username":"snyk"}},{"address":"module.storage.aws_db_subnet_group.km_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"km_rds_subnet_grp_dev","subnet_ids":["subnet-059f7172239c31e10"],"tags":{"Name":"km_rds_subnet_grp_dev"}}},{"address":"module.storage.aws_kms_key.km_db_kms_key","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"km_db_kms_key_dev"}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"public","bucket":"km-blob-storage-dev","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"website":[]}},{"address":"module.storage.aws_s3_bucket.km_public_blob","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket":"km-public-blob","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"website":[]}},{"address":"module.storage.aws_s3_bucket_public_access_block.km_public_blob","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false}},{"address":"module.storage.aws_security_group.km_rds_sg","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Kai Monkey Database","name":"/km-dev/DB_HOST","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString"}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Kai Monkey Database Name","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev"}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Kai Monkey Database Password","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"supersecret"}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Kai Monkey Database Username","name":"/km-dev/DB_USER","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"snyk"}}],"address":"module.storage"},{"resources":[{"address":"module.subnet.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:subnet/subnet-059f7172239c31e10","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","availability_zone_id":"use1-az2","cidr_block":"10.0.0.0/24","id":"subnet-059f7172239c31e10","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"021770407384","tags":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"}}],"address":"module.subnet"},{"resources":[{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0a3b6aca83c2e776b","description":"default VPC security group","egress":[],"id":"sg-0a3b6aca83c2e776b","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"}},{"address":"module.vpc.aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-020ae3d4eed1cb752","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-020ae3d4eed1cb752","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0aea0a516ef1bc75a","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0aea0a516ef1bc75a","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"}},{"address":"module.vpc.aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1::vpc/vpc-00264b62698ca61df","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0bf115e8f30cd259f","default_route_table_id":"rtb-08ac73efb70c84945","default_security_group_id":"sg-0a3b6aca83c2e776b","dhcp_options_id":"dopt-eae0de91","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-00264b62698ca61df","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-08ac73efb70c84945","owner_id":"021770407384","tags":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"after":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"after_unknown":{}}},{"address":"module.instance.aws_instance.this[0]","module_address":"module.instance","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete","create"],"before":{"ami":"ami-0885b1f6bd170450c","arn":"arn:aws:ec2:us-east-1::instance/i-0d3a0eeb6d4d097d7","associate_public_ip_address":false,"availability_zone":"us-east-1c","cpu_core_count":1,"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":null,"iam_instance_profile":"","id":"i-0d3a0eeb6d4d097d7","instance_initiated_shutdown_behavior":"","instance_state":"running","instance_type":"t2.micro","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional"}],"monitoring":false,"network_interface":[],"network_interface_id":null,"outpost_arn":"","password_data":"","placement_group":"","primary_network_interface_id":"eni-0f653b17c81f30546","private_dns":"ip-10-0-0-242.ec2.internal","private_ip":"10.0.0.242","public_dns":"","public_ip":"","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/sda1","encrypted":false,"iops":100,"kms_key_id":"","volume_id":"vol-05bcc8d7e20e64d2c","volume_size":8,"volume_type":"gp2"}],"security_groups":[],"source_dest_check":true,"subnet_id":"subnet-059f7172239c31e10","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-0a3b6aca83c2e776b"]},"after":{"ami":"ami-0a91cd140a1fc148a","credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_optimized":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"","instance_initiated_shutdown_behavior":"","instance_type":"t2.micro","monitoring":false,"source_dest_check":true,"subnet_id":"subnet-059f7172239c31e10","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-0a3b6aca83c2e776b"]},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[{}],"ebs_block_device":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"network_interface_id":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"security_groups":true,"tags":{},"volume_tags":{},"vpc_security_group_ids":[false]}}},{"address":"module.storage.aws_db_instance.km_db","module_address":"module.storage","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"10.6","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","iam_database_authentication_enabled":null,"identifier":"km-db-dev","instance_class":"db.t3.medium","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"name":"km_db_dev","password":"supersecret","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"timeouts":null,"username":"snyk"},"after_unknown":{"address":true,"apply_immediately":true,"arn":true,"availability_zone":true,"backup_retention_period":true,"backup_window":true,"ca_cert_identifier":true,"character_set_name":true,"db_subnet_group_name":true,"endpoint":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"license_model":true,"maintenance_window":true,"monitoring_role_arn":true,"multi_az":true,"option_group_name":true,"parameter_group_name":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replicas":true,"resource_id":true,"s3_import":[],"status":true,"tags":{},"timezone":true,"vpc_security_group_ids":true}}},{"address":"module.storage.aws_db_subnet_group.km_rds_subnet_grp","module_address":"module.storage","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"km_rds_subnet_grp_dev","subnet_ids":["subnet-059f7172239c31e10"],"tags":{"Name":"km_rds_subnet_grp_dev"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":[false],"tags":{}}}},{"address":"module.storage.aws_kms_key.km_db_kms_key","module_address":"module.storage","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"km_db_kms_key_dev"}},"after_unknown":{"arn":true,"id":true,"key_id":true,"policy":true,"tags":{}}}},{"address":"module.storage.aws_s3_bucket.insecure-bucket","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"insecure-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::insecure-bucket-snyk-test","bucket":"insecure-bucket-snyk-test","bucket_domain_name":"insecure-bucket-snyk-test.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"insecure-bucket-snyk-test.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"insecure-bucket-snyk-test","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":null,"after_unknown":{}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"public","bucket":"km-blob-storage-dev","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags":{},"versioning":true,"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"module.storage.aws_s3_bucket.km_public_blob","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"km-public-blob","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"versioning":true,"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"module.storage.aws_s3_bucket.secure-bucket","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"secure-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::secure-bucket-snyk-test","bucket":"secure-bucket-snyk-test","bucket_domain_name":"secure-bucket-snyk-test.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"secure-bucket-snyk-test.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"secure-bucket-snyk-test","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}]}]}],"tags":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":null,"after_unknown":{}}},{"address":"module.storage.aws_s3_bucket_public_access_block.km_public_blob","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false},"after_unknown":{"bucket":true,"id":true}}},{"address":"module.storage.aws_security_group.km_rds_sg","module_address":"module.storage","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"owner_id":true,"tags":{}}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_host","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Kai Monkey Database","name":"/km-dev/DB_HOST","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString"},"after_unknown":{"arn":true,"id":true,"key_id":true,"value":true,"version":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_name","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Kai Monkey Database Name","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev"},"after_unknown":{"arn":true,"id":true,"key_id":true,"tags":{},"version":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_password","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Kai Monkey Database Password","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"supersecret"},"after_unknown":{"arn":true,"id":true,"key_id":true,"version":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_user","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Kai Monkey Database Username","name":"/km-dev/DB_USER","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"snyk"},"after_unknown":{"arn":true,"id":true,"key_id":true,"version":true}}},{"address":"module.subnet.aws_subnet.main","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:021770407384:subnet/subnet-059f7172239c31e10","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","availability_zone_id":"use1-az2","cidr_block":"10.0.0.0/24","id":"subnet-059f7172239c31e10","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"021770407384","tags":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after":{"arn":"arn:aws:ec2:us-east-1:021770407384:subnet/subnet-059f7172239c31e10","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","availability_zone_id":"use1-az2","cidr_block":"10.0.0.0/24","id":"subnet-059f7172239c31e10","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"021770407384","tags":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after_unknown":{}}},{"address":"module.vpc.aws_default_security_group.default","module_address":"module.vpc","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0a3b6aca83c2e776b","description":"default VPC security group","egress":[],"id":"sg-0a3b6aca83c2e776b","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0a3b6aca83c2e776b","description":"default VPC security group","egress":[],"id":"sg-0a3b6aca83c2e776b","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after_unknown":{}}},{"address":"module.vpc.aws_security_group.allow_ssh","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-020ae3d4eed1cb752","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-020ae3d4eed1cb752","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-020ae3d4eed1cb752","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-020ae3d4eed1cb752","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after_unknown":{}}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0aea0a516ef1bc75a","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0aea0a516ef1bc75a","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0aea0a516ef1bc75a","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0aea0a516ef1bc75a","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"after_unknown":{}}},{"address":"module.vpc.aws_vpc.example","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1::vpc/vpc-00264b62698ca61df","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0bf115e8f30cd259f","default_route_table_id":"rtb-08ac73efb70c84945","default_security_group_id":"sg-0a3b6aca83c2e776b","dhcp_options_id":"dopt-eae0de91","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-00264b62698ca61df","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-08ac73efb70c84945","owner_id":"021770407384","tags":{}},"after":{"arn":"arn:aws:ec2:us-east-1::vpc/vpc-00264b62698ca61df","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0bf115e8f30cd259f","default_route_table_id":"rtb-08ac73efb70c84945","default_security_group_id":"sg-0a3b6aca83c2e776b","dhcp_options_id":"dopt-eae0de91","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-00264b62698ca61df","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-08ac73efb70c84945","owner_id":"021770407384","tags":{}},"after_unknown":{}}}],"prior_state":{"format_version":"0.1","terraform_version":"0.14.5","values":{"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false}}],"child_modules":[{"resources":[{"address":"module.instance.aws_instance.this[0]","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0885b1f6bd170450c","arn":"arn:aws:ec2:us-east-1::instance/i-0d3a0eeb6d4d097d7","associate_public_ip_address":false,"availability_zone":"us-east-1c","cpu_core_count":1,"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":null,"iam_instance_profile":"","id":"i-0d3a0eeb6d4d097d7","instance_initiated_shutdown_behavior":"","instance_state":"running","instance_type":"t2.micro","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional"}],"monitoring":false,"network_interface":[],"network_interface_id":null,"outpost_arn":"","password_data":"","placement_group":"","primary_network_interface_id":"eni-0f653b17c81f30546","private_dns":"ip-10-0-0-242.ec2.internal","private_ip":"10.0.0.242","public_dns":"","public_ip":"","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/sda1","encrypted":false,"iops":100,"kms_key_id":"","volume_id":"vol-05bcc8d7e20e64d2c","volume_size":8,"volume_type":"gp2"}],"security_groups":[],"source_dest_check":true,"subnet_id":"subnet-059f7172239c31e10","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-0a3b6aca83c2e776b"]},"depends_on":["module.subnet.aws_subnet.main","module.vpc.aws_default_security_group.default","module.vpc.aws_vpc.example"]}],"address":"module.instance"},{"resources":[{"address":"module.storage.aws_s3_bucket.insecure-bucket","mode":"managed","type":"aws_s3_bucket","name":"insecure-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::insecure-bucket-snyk-test","bucket":"insecure-bucket-snyk-test","bucket_domain_name":"insecure-bucket-snyk-test.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"insecure-bucket-snyk-test.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"insecure-bucket-snyk-test","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"module.storage.aws_s3_bucket.secure-bucket","mode":"managed","type":"aws_s3_bucket","name":"secure-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::secure-bucket-snyk-test","bucket":"secure-bucket-snyk-test","bucket_domain_name":"secure-bucket-snyk-test.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"secure-bucket-snyk-test.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"secure-bucket-snyk-test","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}]}]}],"tags":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}}],"address":"module.storage"},{"resources":[{"address":"module.subnet.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:subnet/subnet-059f7172239c31e10","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","availability_zone_id":"use1-az2","cidr_block":"10.0.0.0/24","id":"subnet-059f7172239c31e10","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"021770407384","tags":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"depends_on":["module.vpc.aws_vpc.example"]}],"address":"module.subnet"},{"resources":[{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0a3b6aca83c2e776b","description":"default VPC security group","egress":[],"id":"sg-0a3b6aca83c2e776b","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-020ae3d4eed1cb752","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-020ae3d4eed1cb752","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:021770407384:security-group/sg-0aea0a516ef1bc75a","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0aea0a516ef1bc75a","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":null,"owner_id":"021770407384","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"vpc-00264b62698ca61df"},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1::vpc/vpc-00264b62698ca61df","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0bf115e8f30cd259f","default_route_table_id":"rtb-08ac73efb70c84945","default_security_group_id":"sg-0a3b6aca83c2e776b","dhcp_options_id":"dopt-eae0de91","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-00264b62698ca61df","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-08ac73efb70c84945","owner_id":"021770407384","tags":{}}}],"address":"module.vpc"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"~\u003e 2.67","expressions":{"access_key":{"references":["var.access_key"]},"region":{"references":["var.region"]},"secret_key":{"references":["var.secret_key"]},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}}},"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_config_key":"aws","expressions":{"max_password_age":{"constant_value":3},"minimum_password_length":{"constant_value":8}},"schema_version":0}],"module_calls":{"instance":{"source":"git@github.com:terraform-aws-modules/terraform-aws-ec2-instance.git","expressions":{"ami":{"references":["var.ami"]},"instance_count":{"constant_value":1},"instance_type":{"constant_value":"t2.micro"},"name":{"constant_value":"example-server"},"subnet_id":{"references":["module.subnet.subnet_id"]},"tags":{"constant_value":{"Environment":"dev","Terraform":"true"}},"vpc_security_group_ids":{"references":["module.vpc.vpc_sg_id"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_instance.this"]},"description":"List of ARNs of instances"},"availability_zone":{"expression":{"references":["aws_instance.this"]},"description":"List of availability zones of instances"},"credit_specification":{"expression":{"references":["aws_instance.this"]},"description":"List of credit specification of instances"},"ebs_block_device_volume_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of volume IDs of EBS block devices of instances"},"id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of instances"},"instance_count":{"expression":{"references":["var.instance_count"]},"description":"Number of instances to launch specified as argument to this module"},"instance_state":{"expression":{"references":["aws_instance.this"]},"description":"List of instance states of instances"},"ipv6_addresses":{"expression":{"references":["aws_instance.this"]},"description":"List of assigned IPv6 addresses of instances"},"key_name":{"expression":{"references":["aws_instance.this"]},"description":"List of key names of instances"},"metadata_options":{"expression":{"references":["aws_instance.this"]},"description":"List of metadata options of instances"},"password_data":{"expression":{"references":["aws_instance.this"]},"description":"List of Base-64 encoded encrypted password data for the instance"},"placement_group":{"expression":{"references":["aws_instance.this"]},"description":"List of placement groups of instances"},"primary_network_interface_id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of the primary network interface of instances"},"private_dns":{"expression":{"references":["aws_instance.this"]},"description":"List of private DNS names assigned to the instances. Can only be used inside the Amazon EC2, and only available if you've enabled DNS hostnames for your VPC"},"private_ip":{"expression":{"references":["aws_instance.this"]},"description":"List of private IP addresses assigned to the instances"},"public_dns":{"expression":{"references":["aws_instance.this"]},"description":"List of public DNS names assigned to the instances. For EC2-VPC, this is only available if you've enabled DNS hostnames for your VPC"},"public_ip":{"expression":{"references":["aws_instance.this"]},"description":"List of public IP addresses assigned to the instances, if applicable"},"root_block_device_volume_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of volume IDs of root block devices of instances"},"security_groups":{"expression":{"references":["aws_instance.this"]},"description":"List of associated security groups of instances"},"subnet_id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of VPC subnets of instances"},"tags":{"expression":{"references":["aws_instance.this"]},"description":"List of tags of instances"},"volume_tags":{"expression":{"references":["aws_instance.this"]},"description":"List of tags of volumes of instances"},"vpc_security_group_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of associated security groups of instances, if running in non-default VPC"}},"resources":[{"address":"aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_config_key":"instance:aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"get_password_data":{"references":["var.get_password_data"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ips","var.private_ips","count.index","var.private_ip"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"subnet_id":{"references":["var.network_interface","var.subnet_id","var.subnet_ids","count.index"]},"tags":{"references":["var.instance_count","var.use_num_suffix","var.num_suffix_format","var.name","count.index","var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"volume_tags":{"references":["var.instance_count","var.use_num_suffix","var.num_suffix_format","var.name","count.index","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]}},"schema_version":1,"count_expression":{"references":["var.instance_count"]}}],"variables":{"ami":{"description":"ID of AMI to use for the instance"},"associate_public_ip_address":{"default":null,"description":"If true, the EC2 instance will have associated public IP address"},"cpu_credits":{"default":"standard","description":"The credit option for CPU usage (unlimited or standard)"},"disable_api_termination":{"default":false,"description":"If true, enables EC2 Instance Termination Protection"},"ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"ebs_optimized":{"default":false,"description":"If true, the launched EC2 instance will be EBS-optimized"},"ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as Instance Store) volumes on the instance"},"get_password_data":{"default":false,"description":"If true, wait for password data to become available and retrieve it."},"iam_instance_profile":{"default":"","description":"The IAM Instance Profile to launch the instance with. Specified as the name of the Instance Profile."},"instance_count":{"default":1,"description":"Number of instances to launch"},"instance_initiated_shutdown_behavior":{"default":"","description":"Shutdown behavior for the instance"},"instance_type":{"description":"The type of instance to start"},"ipv6_address_count":{"default":null,"description":"A number of IPv6 addresses to associate with the primary network interface. Amazon EC2 chooses the IPv6 addresses from the range of your subnet."},"ipv6_addresses":{"default":null,"description":"Specify one or more IPv6 addresses from the range of the subnet to associate with the primary network interface"},"key_name":{"default":"","description":"The key name to use for the instance"},"metadata_options":{"default":{},"description":"Customize the metadata options of the instance"},"monitoring":{"default":false,"description":"If true, the launched EC2 instance will have detailed monitoring enabled"},"name":{"description":"Name to be used on all resources as prefix"},"network_interface":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"num_suffix_format":{"default":"-%d","description":"Numerical suffix format used as the volume and EC2 instance name suffix"},"placement_group":{"default":"","description":"The Placement Group to start the instance in"},"private_ip":{"default":null,"description":"Private IP address to associate with the instance in a VPC"},"private_ips":{"default":[],"description":"A list of private IP address to associate with the instance in a VPC. Should match the number of instances."},"root_block_device":{"default":[],"description":"Customize details about the root block device of the instance. See Block Devices below for details"},"source_dest_check":{"default":true,"description":"Controls if traffic is routed to the instance when the destination address does not match the instance. Used for NAT or VPNs."},"subnet_id":{"default":"","description":"The VPC Subnet ID to launch in"},"subnet_ids":{"default":[],"description":"A list of VPC Subnet IDs to launch in"},"tags":{"default":{},"description":"A mapping of tags to assign to the resource"},"tenancy":{"default":"default","description":"The tenancy of the instance (if the instance is running in a VPC). Available values: default, dedicated, host."},"use_num_suffix":{"default":false,"description":"Always append numerical suffix to instance name, even if instance_count is 1"},"user_data":{"default":null,"description":"The user data to provide when launching the instance. Do not pass gzip-compressed data via this argument; see user_data_base64 instead."},"user_data_base64":{"default":null,"description":"Can be used instead of user_data to pass base64-encoded binary data directly. Use this instead of user_data whenever the value is not a valid UTF-8 string. For example, gzip-encoded user data must be base64-encoded and passed via this argument to avoid corruption."},"volume_tags":{"default":{},"description":"A mapping of tags to assign to the devices created by the instance at launch time"},"vpc_security_group_ids":{"default":null,"description":"A list of security group IDs to associate with"}}}},"storage":{"source":"./modules/storage","expressions":{"acl":{"references":["var.s3_acl"]},"db_password":{"constant_value":"supersecret"},"db_username":{"constant_value":"snyk"},"environment":{"constant_value":"dev"},"private_subnet":{"references":["module.subnet.subnet_id"]},"vpc_id":{"references":["module.vpc.vpc_id"]}},"module":{"resources":[{"address":"aws_db_instance.km_db","mode":"managed","type":"aws_db_instance","name":"km_db","provider_config_key":"storage:aws","expressions":{"allocated_storage":{"constant_value":20},"db_subnet_group_name":{"references":["aws_db_subnet_group.km_rds_subnet_grp"]},"engine":{"constant_value":"postgres"},"engine_version":{"constant_value":"10.6"},"final_snapshot_identifier":{"references":["var.environment"]},"identifier":{"references":["var.environment"]},"instance_class":{"constant_value":"db.t3.medium"},"kms_key_id":{"references":["aws_kms_key.km_db_kms_key"]},"name":{"references":["var.environment"]},"password":{"references":["var.db_password"]},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":true},"storage_type":{"constant_value":"gp2"},"tags":{"references":["var.default_tags","var.environment"]},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["aws_security_group.km_rds_sg"]}},"schema_version":1},{"address":"aws_db_subnet_group.km_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_config_key":"storage:aws","expressions":{"name":{"references":["var.environment"]},"subnet_ids":{"references":["var.private_subnet"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_kms_key.km_db_kms_key","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_config_key":"storage:aws","expressions":{"deletion_window_in_days":{"constant_value":10},"description":{"references":["var.environment"]},"enable_key_rotation":{"constant_value":true},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.km_blob_storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_config_key":"storage:aws","expressions":{"acl":{"references":["var.acl"]},"bucket":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.km_public_blob","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_config_key":"storage:aws","expressions":{"bucket":{"constant_value":"km-public-blob"}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.km_public_blob","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_config_key":"storage:aws","expressions":{"block_public_acls":{"constant_value":false},"block_public_policy":{"constant_value":false},"bucket":{"references":["aws_s3_bucket.km_public_blob"]}},"schema_version":0},{"address":"aws_security_group.km_rds_sg","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_config_key":"storage:aws","expressions":{"name":{"constant_value":"km_rds_sg"},"tags":{"references":["var.default_tags","var.environment"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_ssm_parameter.km_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Name"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Password"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Username"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db"]}},"schema_version":0}],"variables":{"acl":{},"db_password":{},"db_username":{},"default_tags":{"default":{},"description":"default tags to resources"},"environment":{"description":"the type of environment (dev,staging/prod)"},"private_subnet":{},"vpc_id":{}}}},"subnet":{"source":"./modules/subnet","expressions":{"vpc_id":{"references":["module.vpc.vpc_id"]}},"module":{"outputs":{"subnet_id":{"expression":{"references":["aws_subnet.main"]}}},"resources":[{"address":"aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_config_key":"subnet:aws","expressions":{"cidr_block":{"references":["var.cidr"]},"tags":{"constant_value":{"Name":"Main"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"cidr":{"default":"10.0.0.0/24"},"vpc_id":{}}}},"vpc":{"source":"./modules/vpc","module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.example"]}},"vpc_sg_id":{"expression":{"references":["aws_default_security_group.default"]}}},"resources":[{"address":"aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_config_key":"vpc:aws","expressions":{"vpc_id":{"references":["aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_config_key":"vpc:aws","expressions":{"description":{"constant_value":"Allow SSH inbound from anywhere"},"name":{"constant_value":"allow_ssh"},"vpc_id":{"references":["aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_config_key":"vpc:aws","expressions":{"description":{"constant_value":"Allow SSH inbound from specific range"},"name":{"constant_value":"allow_ssh_with_valid_cidr"},"vpc_id":{"references":["aws_vpc.example"]}},"schema_version":1},{"address":"aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.cidr"]}},"schema_version":1}],"variables":{"cidr":{"default":"10.0.0.0/16"}}}}},"variables":{"access_key":{},"ami":{"description":"ami used for ec2 instance. example - ami-0a91cd140a1fc148a (Ubuntu 20.4 LTS)"},"region":{"default":"us-east-1"},"s3_acl":{"default":"public"},"secret_key":{}}}}}
